app:
  name: invest_ai
  mode: dev
data:
  cache_dir: data/raw
  processed_dir: data/processed
  outputs_dir: data/outputs
  default_universe: ["SPY","QQQ","DIA","IWM","VTI","EFA","EEM","TLT","SHY","LQD","HYG","MUB","BIL","GLD","DBC","GSG","VNQ","AAPL","MSFT","AMZN","GOOGL","META","TSLA"]

fetch:
  allow_live_fetch: true   # Enable live API calls when cache is missing/stale
  min_cache_rows: 100      # Minimum rows required to cache (protects against error responses)
apis:
  fred_base: "https://api.stlouisfed.org/fred"
  polygon_base: "https://api.polygon.io"
  use_yfinance_fallback: true
risk:
  rebalance_freq: "monthly"
  target_vol_buckets:
    low: 0.08
    moderate: 0.12
    high: 0.18
optimization:
  method: "HRP"
  min_weight: 0.00
  max_weight: 0.30
  risk_free_rate: 0.015

multifactor:
  # Asset-level filters
  min_asset_sharpe: -0.5          # Min Sharpe for any asset (allows some negative but not terrible)
  max_asset_vol_multiplier: 2.0   # Max vol = risk_profile.band_max_vol * this multiplier
  max_asset_drawdown: -0.60       # Max acceptable asset drawdown (-60%)
  
  # Portfolio-level filters
  min_portfolio_sharpe: 0.3       # Min portfolio Sharpe ratio
  max_portfolio_drawdown: -0.50   # Max acceptable portfolio drawdown (-50%)
  max_risk_contribution: 0.40     # Max % of risk from single asset (40%)
  min_diversification_ratio: 1.2  # Min diversification ratio
  min_holdings: 3                 # Min number of holdings
  
  # Scoring & ranking
  drawdown_penalty_lambda: 0.2    # Penalty weight for drawdown in composite score
  distinctness_threshold: 0.995   # Cosine similarity threshold for duplicate detection
  # Soft volatility band parameters (Phase 3)
  vol_soft_lower_factor: 0.6      # Soft zone lower bound = band_min_vol * factor
  soft_vol_penalty_lambda: 0.5    # Penalty intensity for gap inside soft zone

universe:
  # Quality thresholds balanced for reliability with current provider mix
  # Stooq cache provides 15y+ history; accepts symbols without volume data
  core_min_years: 5.0       # Core holdings: 5y history (captures most Stooq cache)
  sat_min_years: 3.0        # Satellite: 3y minimum for tactical allocation
  max_missing_pct: 15.0     # 15% missing data max (accommodates weekends/holidays)
  min_median_volume: null   # Disabled: many Stooq cache files lack volume data
  # When start date is omitted, use this default to request multi-year history
  default_start_date: "2010-01-01"
